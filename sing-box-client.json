{
  "log": {
    "disabled": true
  },
  "dns": {
    "servers": [
      {
        "address": "tcp://1.1.1.1",
        "address_strategy": "ipv4_only",
        "strategy": "ipv4_only",
        "detour": "vless-httpupgrade-out"
      },
      {
        "tag": "bypass-dns",
        "address": "tcp://95.138.193.252:32043",
        "address_strategy": "ipv4_only",
        "strategy": "ipv4_only",
        "detour": "dns-direct"
      }
    ],
     "rules": [
      {
        "domain": ["direct.speedtest.tvpg.hu"],
        "server": "bypass-dns"
      }
    ]
  },
  "inbounds": [
    {
      "type": "tun",
      "tag": "tun-in",
      "interface_name": "VPN",
      "inet4_address": ["172.18.0.1/30"],
      "stack": "system",
      "auto_route": true,
      "strict_route": true,
      "endpoint_independent_nat": true,
      "sniff": true
    }
  ],
  "outbounds": [
    {
      "multiplex": {
        "enabled": true,
        "max_streams": 1024
      },
      "type": "vless",
      "tag": "vless-httpupgrade-out",
      "server": "direct.speedtest.tvpg.hu",
      "server_port": 8080,
      "uuid": "root",
      "packet_encoding": "xudp",
      "tcp_fast_open": true,
      "domain_strategy": "ipv4_only",
      "transport": {
        "type": "httpupgrade"
     }
    },
    {
      "type": "direct",
      "tag": "dns-direct"
    },
    {
      "type": "dns",
      "tag": "dns-out"
    }
  ],
  "route": {
    "rules": [
      {
        "protocol": "dns",
        "outbound": "dns-out"
      }
    ],
    "final": "vless-httpupgrade-out",
    "auto_detect_interface": true
  }
}
